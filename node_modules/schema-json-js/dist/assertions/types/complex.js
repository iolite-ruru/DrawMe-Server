"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.deepEqual=deepEqual;exports.isEnum=isEnum;exports.isParentKeyword=isParentKeyword;exports.isPathFragment=isPathFragment;exports.isRef=isRef;exports.isSchema=isSchema;exports.isSchemaType=isSchemaType;exports.isSubSchema=isSubSchema;exports.isTypedArray=isTypedArray;var _primitive=require("./primitive");const isGenericKeyRegex=/^(?:const|enum)$/,isObjKeyRegex=/^(?:properties|patternProperties|dependencies|definitions)$/,isSchemaTypeRegex=/^(?:array|boolean|integer|null|number|object|string)$/,isUrlRegex=/^(?:((?:(http|https):\/\/)(?:[a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])(?:\.(?:[a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9]))*(?::\d+)?\/)?((?:~(?=[01])|[^~])*)|#(?:~(?=[01])|[^~])*)$/;function deepEqual(e,t){if((0,_primitive.isArray)(t)){if(!(0,_primitive.isArray)(e))return!1;if(e.length!==t.length)return!1;let r=t.length;for(;r--;)if(!deepEqual(e[r],t[r]))return!1}else if(t&&"object"==typeof t){if(!(0,_primitive.isObject)(e))return!1;const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!1;let i=r.length;for(;i--;)if(!deepEqual(e[r[i]],t[r[i]]))return!1}else if(e!==t)return!1;return!0}function isEnum(e,t){if(!(0,_primitive.isArray)(e)||!e.length)return!1;const r=new Set;let i=e.length;for(;i--;)e[i]&&"object"==typeof e[i]?r.add(JSON.stringify(e[i])):r.add(e[i]);if(e.length!==r.size)return!1;if(t){let r=e.length;for(;r--;)if(!t(e[r]))return!1}return!0}function isParentKeyword(e){const t=e.length;let r=!1;isObjKeyRegex.test(e[t-1])&&(r=!0);"properties"===e[t-2]&&(r=!1);let i=e.length;for(;i--;)isGenericKeyRegex.test(e[i])&&(r=!0);return r}function isPathFragment(e){return"/"===e[e.length-1]}function isRef(e){return isUrlRegex.exec(decodeURI(e))}function isSchema(e){return(0,_primitive.isObject)(e)||(0,_primitive.isBoolean)(e)}function isSchemaType(e){return isSchemaTypeRegex.test(e)}function isSubSchema(e,t){const r=isRef(e);return(0,_primitive.isArray)(r)&&r[1]&&r[2]&&"definitions"===t[t.length-2]}function isTypedArray(e,t){let r=e.length;for(;r--;)if(!t(e[r]))return!1;return!0}
